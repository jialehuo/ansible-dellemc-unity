---
- hosts: localhost
  tasks:
    - name: portal create
      portal:
        login:
          unityIP: "{{ host }}"
          username: "{{ username }}"
          password: "{{ password }}"
        create:
          ethernetPort: {"id": "spa_eth0"}
          ipAddress: "192.168.70.217"
          netmask: "255.255.255.0"
      register: result
    - debug: var=result
    - name: portal modify
      portal:
        login:
          unityIP: "{{ host }}"
          username: "{{ username }}"
          password: "{{ password }}"
        modify:
          id: "{{ result['output']['create']['id'] }}"
          ipAddress: "192.168.70.217"
    - debug: var=result
    - name: portal delete
      portal:
        login:
          unityIP: "{{ host }}"
          username: "{{ username }}"
          password: "{{ password }}"
        delete:
          id: "{{ result['output']['create']['id'] }}"
      register: result
    - debug: var=result
